// Â© 2023 27 Software
//
// ************************************************************************
// Author           : DXterity8 Version 8.6
// Created          : March 19, 2023 7:56:06 AM
// File             : DifficultyLevelLogicTestsBase.cs
// ************************************************************************

using System;
using System.Collections.Generic;
using System.Linq;
using System.Transactions;

using KnightsTour;
using Microsoft.VisualStudio.TestTools.UnitTesting;

namespace KnightsTourUnitTests.Entity
{
    /// <summary>
    /// Tests against the DifficultyLevelLogic support class.  Inherits <seealso cref="BaseDataTest" />
    /// Generated On: March 19, 2023 at 7:56:06 AM by DXterity Solutions.
    /// Generated By: DXterity8 Version 8.6.0 (see https://dxteritysolutions.com/).
    /// </summary>
    /// <remarks>
    /// This class will be regenerated when requested to stay in sync with your model.
    /// </remarks>
    [TestClass]
    public class DifficultyLevelLogicTestsBase : DataTestBase<int?>
    {
        #region DifficultyLevel logic tests Methods

        /// <summary>
        /// Description for Difficulty Level Logic_ Has Repository.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_HasRepository()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            KnightsTour.CoreLibrary.IRepository<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite, int?> repository = logic.Repository;
            Assert.IsNotNull(repository);
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Has Storage Handler.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_HasStorageHandler()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            KnightsTour.CoreLibrary.IStorageHandler handler = logic.StorageHandler;
            Assert.IsNotNull(handler);
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get By Id.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetById()
        {
            EntityRepository_GetById<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get By Ids.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetByIds()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.RecordCount) > 1)
            {
                int? firstId = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.FirstId);
                int? lastId = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.LastId);
                List<int?> ids = new List<int?>() { firstId, lastId };

                List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetByIds(ids).ToList();
                Assert.IsNotNull(difficultyLevels);
                Assert.AreEqual(difficultyLevels.Count, 2);
                difficultyLevels = difficultyLevels.OrderBy(x => x.Id).ToList();
                Assert.AreEqual(difficultyLevels[0].Id, firstId);
                Assert.AreEqual(difficultyLevels[1].Id, lastId);
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get All.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetAll()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            long totalRecords = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.RecordCount);
            if (totalRecords > 0)
            {
                List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetAll().ToList();
                Assert.IsTrue(difficultyLevels.Count > 0);
                Assert.IsTrue(difficultyLevels.Count >= totalRecords);
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get All_ By Condition.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetAll_ByCondition()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            string pk = new KnightsTour.DifficultyLevel().PrimaryKeyField;

            long totalRecords = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.RecordCount);
            if (totalRecords > 1)
            {
                int? maxId = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.LastId);
                List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetAll(new KnightsTour.CoreLibrary.RetrievalCondition { SQLWhere = $"{StorageProvider.GetColumnSQL(pk)} < {maxId}" }).ToList();
                Assert.IsTrue(difficultyLevels.Count > 0);
                Assert.IsTrue(difficultyLevels.Count < totalRecords);
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get All_ By Predicate.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetAll_ByPredicate()
        {
            long totalRecords = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.RecordCount);
            if (totalRecords > 0)
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
                int? maxId = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.LastId);
                EntityRepository_GetAll_ByPredicate<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(a => a.DifficultyLevelId < maxId);

                if (totalRecords > 1)
                {
                    List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetAll(a => a.DifficultyLevelId < maxId).ToList();
                    Assert.IsTrue(difficultyLevels.Count > 0);
                    Assert.IsTrue(difficultyLevels.Count < totalRecords);
                }
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get All_ By F K.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetAll_ByFK()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            foreach (string property in EntityMapper.FKNames(new KnightsTour.DifficultyLevel().EntityName))
            {
                // Get some valid FK Values.
                foreach (int? fkValue in StorageProvider.GetFKValues<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite, int?>(property))
                {
                    List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetByFK(property, fkValue, new KnightsTour.CoreLibrary.RetrievalCondition { SQLOrderBy = property, Skip = 0, Take = MaxFKQuantity }).ToList();
                    Assert.IsTrue(difficultyLevels.Count > 0);
                    Assert.IsTrue(difficultyLevels.Count <= MaxFKQuantity);
                }
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Get All_ By F Ks.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_GetAll_ByFKs()
        {
            KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
            foreach (string property in EntityMapper.FKNames(new KnightsTour.DifficultyLevel().EntityName))
            {
                // Get some valid FK Values.
                List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetByFKs(property, KnightsTour.StorageProvider.GetFKValues<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite, int?>(property), new KnightsTour.CoreLibrary.RetrievalCondition { SQLOrderBy = property, Skip = 0, Take = MaxFKQuantity }).ToList();
                Assert.IsTrue(difficultyLevels.Count > 0);
                Assert.IsTrue(difficultyLevels.Count <= MaxFKQuantity);
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Insert_ Single.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Insert_Single()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Insert_ Multiple.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Insert_Multiple()
        {
            // Block size larger than the number of accounts.
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                List<KnightsTour.DifficultyLevel> difficultyLevels = CreateEntities<KnightsTour.DifficultyLevel>(BulkTestQuantity);

                Assert.IsNotNull(difficultyLevels);
                Assert.IsTrue(difficultyLevels.Count == BulkTestQuantity);
                foreach (KnightsTour.DifficultyLevel difficultyLevel in difficultyLevels)
                {
                    Assert.IsTrue(difficultyLevel.IsNew);
                }

                // If the primary key insertion type is manual, then configure some values now.
                if (difficultyLevels[0].PKInsertConfiguration == KnightsTour.CoreLibrary.Enumerations.InsertPKRule.Manual)
                {
                    foreach (KnightsTour.DifficultyLevel difficultyLevel in difficultyLevels)
                    {
                        difficultyLevel.Id = GetRandomValue<int?>();
                    }
                }

                KnightsTour.CoreLibrary.IActionResponse response = logic.Insert(difficultyLevels, 500);
                Assert.IsTrue(response.IsValid);

                // Block size less than the number of accounts.
                difficultyLevels = CreateEntities<KnightsTour.DifficultyLevel>(BulkTestQuantity);

                Assert.IsNotNull(difficultyLevels);
                Assert.IsTrue(difficultyLevels.Count == BulkTestQuantity);
                foreach (KnightsTour.DifficultyLevel difficultyLevel in difficultyLevels)
                {
                    Assert.IsTrue(difficultyLevel.IsNew);
                }

                // If the primary key insertion type is manual, then configure some values now.
                if (difficultyLevels[0].PKInsertConfiguration == KnightsTour.CoreLibrary.Enumerations.InsertPKRule.Manual)
                {
                    foreach (KnightsTour.DifficultyLevel difficultyLevel in difficultyLevels)
                    {
                        difficultyLevel.Id = GetRandomValue<int?>();
                    }
                }

                response = logic.Insert(difficultyLevels, BulkTestQuantity - 1);
                Assert.IsTrue(response.IsValid);
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Update_ Single.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Update_Single()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert a new difficultyLevel
                KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                #endregion

                #region Now let's update that newly created difficultyLevel
                if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.HasStringField))
                {
                    string stringField = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.StringField);
                    string currentValue = KnightsTour.CoreLibrary.ReflectionAssistant.GetValue<KnightsTour.DifficultyLevel, string>(difficultyLevel, stringField);
                    string newValue = "modified";
                    if (string.IsNullOrEmpty(currentValue))
                    {
                        newValue = currentValue + " modified.";
                        if (currentValue.StartsWith("a"))
                        {
                            newValue = currentValue.Replace("a", "z");
                        }
                    }
                    KnightsTour.CoreLibrary.ReflectionAssistant.SetValue<KnightsTour.DifficultyLevel>(difficultyLevel, stringField, newValue);
                    KnightsTour.CoreLibrary.IActionResponse updateResponse = logic.Update(difficultyLevel);
                    Assert.IsTrue(updateResponse.IsValid);
                }
                else if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.HasIntField))
                {
                    string intField = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.IntField);
                    int currentValue = KnightsTour.CoreLibrary.ReflectionAssistant.GetValue<KnightsTour.DifficultyLevel, int>(difficultyLevel, intField);
                    int newValue = currentValue + 1;
                    KnightsTour.CoreLibrary.ReflectionAssistant.SetValue<KnightsTour.DifficultyLevel>(difficultyLevel, intField, newValue);
                    KnightsTour.CoreLibrary.IActionResponse updateResponse = logic.Update(difficultyLevel);
                    Assert.IsTrue(updateResponse.IsValid);
                }
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Update_ Multiple.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Update_Multiple()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                string pk = new KnightsTour.DifficultyLevel().PrimaryKeyField;

                if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.RecordCount) > 0)
                {
                    List<KnightsTour.DifficultyLevel> difficultyLevels = logic.GetAll(new KnightsTour.CoreLibrary.RetrievalCondition
                    {
                        SQLOrderBy = StorageProvider.GetColumnSQL(pk),
                        Skip = 0,
                        Take = BulkTestQuantity
                    }).ToList();

                    Assert.IsTrue(difficultyLevels.Count > 0);

                    // Modify each account.
                    bool modified = false;
                    foreach (KnightsTour.DifficultyLevel difficultyLevel in difficultyLevels)
                    {
                        if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.HasStringField))
                        {
                            string stringField = GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.StringField);
                            string currentValue = KnightsTour.CoreLibrary.ReflectionAssistant.GetValue<KnightsTour.DifficultyLevel, string>(difficultyLevel, stringField);
                            string newValue = "modified";
                            if (string.IsNullOrEmpty(currentValue))
                            {
                                newValue = currentValue + " modified.";
                                if (currentValue.StartsWith("a"))
                                {
                                    newValue = currentValue.Replace("a", "z");
                                }
                            }
                            KnightsTour.CoreLibrary.ReflectionAssistant.SetValue<KnightsTour.DifficultyLevel>(difficultyLevel, stringField, newValue);
                            modified = true;
                        }
                        else if (GetEntityProperty<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.HasIntField))
                        {
                            string intField = GetEntityProperty<KnightsTour.DifficultyLevel, DifficultyLevelLite>(KnightsTour.CoreLibrary.Enumerations.EntityProperty.IntField);
                            int currentValue = KnightsTour.CoreLibrary.ReflectionAssistant.GetValue<KnightsTour.DifficultyLevel, int>(difficultyLevel, intField);
                            int newValue = currentValue + 1;
                            KnightsTour.CoreLibrary.ReflectionAssistant.SetValue<KnightsTour.DifficultyLevel>(difficultyLevel, intField, newValue);
                            modified = true;
                        }
                    }
                    if (modified)
                    {
                        KnightsTour.CoreLibrary.IActionResponse updateResponse = logic.Update(difficultyLevels);
                        Assert.IsTrue(updateResponse.IsValid);
                    }
                }
            }

        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete By Id.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_DeleteById()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert a new difficultyLevel
                KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                #endregion

                #region Now let's delete that newly created difficultyLevel by it's id
                KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.Delete(difficultyLevel.Id.Value);
                Assert.IsTrue(deleteResponse.IsValid);
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete By Ids.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_DeleteByIds()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert some new difficultyLevels
                List<int?> newIds = new List<int?>();
                for (int i = 0; i < BulkTestQuantity; i++)
                {
                    KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                    newIds.Add(difficultyLevel.Id.Value);
                }
                Assert.IsTrue(newIds.Count == BulkTestQuantity);
                #endregion

                #region Now let's delete that newly cretaed difficultyLevel by it's id
                KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.Delete(newIds);
                Assert.IsTrue(deleteResponse.IsValid);
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete By Entity.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_DeleteByEntity()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert a new difficultyLevel
                KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                #endregion

                #region Now let's delete that newly created difficultyLevel by it's id
                KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.Delete(difficultyLevel);
                Assert.IsTrue(deleteResponse.IsValid);
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete By Entities.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_DeleteByEntities()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert some new difficultyLevels
                List<KnightsTour.DifficultyLevel> newEntities = new List<KnightsTour.DifficultyLevel>();
                for (int i = 0; i < BulkTestQuantity; i++)
                {
                    KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                    newEntities.Add(difficultyLevel);
                }
                Assert.IsTrue(newEntities.Count == BulkTestQuantity);
                #endregion

                #region Now let's delete that newly created difficultyLevel by it's id
                KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.Delete(newEntities);
                Assert.IsTrue(deleteResponse.IsValid);
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete_ Cascade.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Delete_Cascade()
        {
            using (var transactionScope = new TransactionScope())
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);

                #region Create and insert a new difficultyLevel
                KnightsTour.DifficultyLevel difficultyLevel = InsertEntity<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite>();
                #endregion

                #region Now let's delete that newly created difficultyLevel by it's id
                KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.DeleteCascade(difficultyLevel.Id.Value);
                Assert.IsTrue(deleteResponse.IsValid);
                #endregion
            }
        }

        /// <summary>
        /// Description for Difficulty Level Logic_ Delete_ By F K.
        /// </summary>
        [TestMethod]
        public void DifficultyLevelLogic_Delete_ByFK()
        {
            EntityMetaData meta = new EntityMetaData(KnightsTour.Enumerations.EntityName.DifficultyLevel, UserName);

            if (meta.Dependencies.Count > 0)
            {
                Assert.Inconclusive("Delete by FK is not possible due to dependencies.");
            }
            else
            {
                KnightsTour.DifficultyLevelLogic logic = new KnightsTour.DifficultyLevelLogic(UserName);
                using (var transactionScope = new TransactionScope())
                {
                    foreach (string property in EntityMapper.FKNames(new KnightsTour.DifficultyLevel().EntityName))
                    {
                        // Get some valid FK Values.
                        foreach (int fkValue in StorageProvider.GetFKValues<KnightsTour.DifficultyLevel, KnightsTour.DifficultyLevelLite, int?>(property))
                        {
                            KnightsTour.CoreLibrary.IActionResponse deleteResponse = logic.DeleteByFK(property, fkValue);
                            Assert.IsTrue(deleteResponse.IsValid);
                        }
                    }
                }
            }
        }
        #endregion DifficultyLevel logic tests Methods

    } // Class
} // Namespace