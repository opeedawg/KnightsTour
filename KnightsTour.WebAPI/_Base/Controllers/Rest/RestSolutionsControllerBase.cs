// Â© 2023 27 Software
//
// ************************************************************************
// Author           : DXterity8 Version 8.6
// Created          : October 14, 2023 10:21:15 AM
// File             : RestSolutionsControllerBase.cs
// ************************************************************************

using System;
using System.Collections.Generic;
using System.Linq;
using System.Net;
using System.Security.Claims;
using System.Threading.Tasks;

using KnightsTour;
using KnightsTour.CoreLibrary;
using KnightsTour.WebAPI;
using Microsoft.AspNetCore.Authorization;
using Microsoft.AspNetCore.Mvc;

namespace WebAPI.RestControllers
{
    /// <summary>
    /// The base Rest based solution endpoints.
    /// Generated On: October 14, 2023 at 10:21:15 AM by DXterity Solutions.
    /// Generated By: DXterity8 Version 8.6.0 (see https://dxteritysolutions.com/).
    /// </summary>
    /// <seealso cref="System.Web.Http.ApiController" />
    /// <remarks>
    /// As this class is just one of 3 available API techniques, it is prefixed with "Rest" as namespace differentations are not respected in the APIController protocol.
    /// This class is overwritten every time the entity or generator version is modified to stay in sync with your model.
    /// </remarks>
    public class RestSolutionsControllerBase : ApiControllerBase
    {
        #region Public endpoints Methods

        /// <summary>
        /// Offers a simple ping test to see if the controller is responding at all.
        /// </summary>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("ping")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public IActionResult Ping()
        {
            return Ok("Rest Solutions controller is responding.");
        }

        /// <summary>
        /// Returns a page limited list of all Solution entities.
        /// </summary>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Get()
        {
            return await ExecuteCommonAsync(_Get);
        }

        /// <summary>
        /// Returns a single Solution entity.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to retrieve.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Get(int? id)
        {
            return await ExecuteCommonAsync(_Get, new dynamic[] { id });
        }

        /// <summary>
        /// Returns a list of entities based on the ids requested.  Supports object hydration.
        /// </summary>
        /// <param name="ids">The ids of the <seealso cref="KnightsTour.Solution" /> of which to retrieve.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("ids/{ids}")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> GetByIds(string ids)
        {
            return await ExecuteCommonAsync(_GetByIds, new dynamic[] { ids });
        }

        /// <summary>
        /// Insert a lite <seealso cref="KnightsTour.Solution" /> entity.
        /// </summary>
        /// <param name="solutionLite">The new <seealso cref="KnightsTour.SolutionLite" /> to insert.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("")]
        [HttpPost]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Post([FromBody] KnightsTour.SolutionLite solutionLite)
        {
            return await ExecuteCommonAsync(_Post, new dynamic[] { solutionLite });
        }

        /// <summary>
        /// Insert a lite <seealso cref="KnightsTour.Solution" /> entity in a cascading manner.
        /// </summary>
        /// <param name="solutionLite">The new <seealso cref="KnightsTour.Solution" /> to insert.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("cascade")]
        [HttpPost]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> PostCascade([FromBody] KnightsTour.SolutionLite solutionLite)
        {
            return await ExecuteCommonAsync(_PostCascade, new dynamic[] { solutionLite });
        }

        /// <summary>
        /// Updated the passed<seealso cref="KnightsTour.Solution" /> entity.
        /// </summary>
        /// <param name="solutionLite">The <seealso cref="KnightsTour.SolutionLite" /> to update.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("")]
        [HttpPut]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Put([FromBody] KnightsTour.SolutionLite solutionLite)
        {
            return await ExecuteCommonAsync(_Put, new dynamic[] { solutionLite });
        }

        /// <summary>
        /// Deletes a single Solution entity.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to delete.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}")]
        [HttpDelete]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Delete(int? id)
        {
            return await ExecuteCommonAsync(_Delete, new dynamic[] { id });
        }

        /// <summary>
        /// Deletes a single Solution entity and all its dependencies.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to delete.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}/cascade")]
        [HttpDelete]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> DeleteCascade(int? id)
        {
            return await ExecuteCommonAsync(_DeleteCascade, new dynamic[] { id });
        }

        /// <summary>
        /// Deletes a single Solution entity.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to delete.</param>
        /// <param name="fkName">The foerign key column name for which to use as a basis for this deletion.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}/byFK/{fkName}")]
        [HttpDelete]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> DeleteByFK(int? id, string fkName)
        {
            return await ExecuteCommonAsync(_DeleteByFK, new dynamic[] { fkName, id });
        }

        /// <summary>
        /// Performs a defined custom action against the passed ids.
        /// </summary>
        /// <param name="actionName">The name of the defined/configured custom action.</param>
        /// <param name="ids">The list of pks in which to exiecute this action.  Can be a single one.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("doCustomAction/{actionName}/{ids}")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> DoCustomAction(string actionName, string ids)
        {
            return await ExecuteCommonAsync(_DoCustomAction, new dynamic[] { actionName, ids });
        }

        /// <summary>
        /// Returns a single Solution entity.
        /// </summary>
        /// <param name="filter">The filter to apply to the <seealso cref="KnightsTour.Solution" /> of which to retrieve.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("extended")]
        [HttpPost]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> GetAllExtended([FromBody] KnightsTour.CoreLibrary.EntityFilter filter)
        {
            return await ExecuteCommonAsync(_GetAllExtended, new dynamic[] { filter });
        }

        /// <summary>
        /// Returns the number of Solution records fiven the filter.
        /// </summary>
        /// <param name="filter">The filter to apply to the <seealso cref="KnightsTour.Solution" /> of which to retrieve.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("count")]
        [HttpPost]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> GetCount([FromBody] KnightsTour.CoreLibrary.EntityFilter filter)
        {
            return await ExecuteCommonAsync(_GetCount, new dynamic[] { filter });
        }

        /// <summary>
        /// Returns the related Puzzle entity related to the Solution.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to retrieve the related <seealso cref="KnightsTour.Puzzle" /> entity.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}/puzzle")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Puzzle(int? id)
        {
            return await ExecuteCommonAsync(_Puzzle, new dynamic[] { id });
        }

        /// <summary>
        /// Returns the related Member entity related to the Solution.
        /// </summary>
        /// <param name="id">The id of the <seealso cref="KnightsTour.Solution" /> of which to retrieve the related <seealso cref="KnightsTour.Member" /> entity.</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        [Route("{id}/member")]
        [HttpGet]
        #if !DEBUG
        [Authorize]
        #endif
        public async Task<IActionResult> Member(int? id)
        {
            return await ExecuteCommonAsync(_Member, new dynamic[] { id });
        }
        #endregion Public endpoints Methods

        #region CRUD Methods

        /// <summary>
        /// Returns a page limited list of all Solution entities.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Get(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                ActionResponse response = new ActionResponse();
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                    if (callLog.Arguments == null)
                    {
                        IEnumerable<KnightsTour.Solution> solutions = ApplyCollectionFilter<KnightsTour.Solution>(Request, logic.GetAll());
                        response.DataObject = solutions.ToLite();
                    }
                    else
                    {
                        KnightsTour.Solution solution = logic.GetById(callLog.Arguments[0]);
                        if (solution == null)
                        {
                            return new NotFoundResult();
                        }
                        else
                        {
                            response.DataObject = solution.ToLite();
                        }
                    }
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Returns a list of Solution entities based on the ids passed.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _GetByIds(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                if (callLog.Arguments == null)
                {
                    return NoContent();
                }
                else
                {
                    ActionResponse response = new ActionResponse();
                    try
                    {
                        KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                        // The list of ids is always passed as a string, parse it out now.
                        string ids = callLog.Arguments[0];
                        IEnumerable<KnightsTour.Solution> solutions = ApplyCollectionFilter<KnightsTour.Solution>(Request, logic.GetByIds(SplitNumericIds(ids)));
                        response.Append(new Message($"{solutions.Count()} records returned."));
                        response.DataObject = solutions.ToLite();
                    }
                    catch (Exception exception)
                    {
                        response.Append(FormatException(exception));
                    }

                    return ValidateResponseObject(response);
                }
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Insert a lite <seealso cref="KnightsTour.Solution" /> entity.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Post(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _Post");
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);

                    KnightsTour.Solution newSolution = new KnightsTour.Solution();
                    if (callLog.Arguments[0] != null)
                    {
                        newSolution = new KnightsTour.Solution(callLog.Arguments[0]);
                        response = logic.Insert(newSolution);
                    }
                    else
                    {
                        // Most likely a serialization issue on the object.
                        response.Append(new Exception("A technical problem occurred: No solution passed to insert."));
                    }

                    if (response.IsValid)
                    {
                        response.DataObject = logic.GetById(newSolution.SolutionId.Value).ToLite();
                    }
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Insert a lite <seealso cref="KnightsTour.Solution" /> entity.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _PostCascade(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _PostCascade");
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);

                    KnightsTour.SolutionLite liteEntity = callLog.Arguments[0];
                    if (liteEntity != null)
                    {
                        KnightsTour.Solution newSolution = new KnightsTour.Solution(liteEntity);
                        response = logic.InsertCascade(newSolution);

                        if (response.IsValid)
                        {
                            response.DataObject = logic.GetById(newSolution.SolutionId.Value).ToLite();
                        }
                    }
                    else
                    {
                        response.Append(new Exception("No data passed."));
                    }
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Updated the passed<seealso cref="KnightsTour.Solution" /> entity.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Put(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _Put");
                try
                {
                    KnightsTour.SolutionLite solutionLite = callLog.Arguments[0];
                    if (solutionLite != null && solutionLite.SolutionId.HasValue)
                    {
                        KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);

                        KnightsTour.Solution existingSolution = logic.GetById(solutionLite.SolutionId.Value);
                        if (existingSolution != null)
                        {
                            existingSolution.UpdateFromLite(solutionLite);
                            if (existingSolution.IsModified())
                            {
                                response = logic.Update(existingSolution, callLog.ExecutingUserId);

                                if (response.IsValid)
                                {
                                    response.DataObject = existingSolution.ToLite();
                                }
                            }
                            else
                            {
                                response.Append(new Message("No update required.", KnightsTour.CoreLibrary.Enumerations.MessageType.Warning));
                            }
                        }
                        else
                        {
                            response.Append(new Exception("No Solution found with primary key " + solutionLite.SolutionId.Value));
                        }
                    }
                    else
                    {
                        // Most likely a serialization issue on the object.
                        response.Append(new Exception("A technical problem occurred: No solution passed to update."));
                    }
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Deletes a single Solution entity.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Delete(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _Delete");
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                    response = logic.Delete(callLog.Arguments[0]);
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Deletes a single Solution entity and all its dependencies.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _DeleteCascade(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _DeleteCascade");
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                    response = logic.DeleteCascade(callLog.Arguments[0]);
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Deletes a collection of Solution entities by a foreign key.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _DeleteByFK(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                IActionResponse response = new ActionResponse("API _DeleteByFK");
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                    response = logic.DeleteByFK(callLog.Arguments[0], callLog.Arguments[1]);
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Performs a defined custom action against the passed ids.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _DoCustomAction(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                ActionResponse response = new ActionResponse();
                try
                {
                    KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                    response = logic.DoCustomAction(callLog.Arguments[0], callLog.Arguments[1]);
                }
                catch (Exception exception)
                {
                    response.Append(FormatException(exception));
                }

                return ValidateResponseObject(response);
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Returns a list of Solution entities based on the filter.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _GetAllExtended(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                if (callLog.Arguments == null)
                {
                    return NoContent();
                }
                else
                {
                    ActionResponse response = new ActionResponse();
                    try
                    {
                        KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                        EntityFilter filter = callLog.Arguments[0];
                        IEnumerable<KnightsTour.Solution> solutions = logic.GetAllExtended(filter);
                        response.Append(new Message($"{solutions.Count()} records returned."));
                        response.DataObject = solutions.ToLite();
                    }
                    catch (Exception exception)
                    {
                        response.Append(FormatException(exception));
                    }

                    return ValidateResponseObject(response);
                }
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Returns the total number of Solution entities based on the filter.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _GetCount(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                if (callLog.Arguments == null)
                {
                    return NoContent();
                }
                else
                {
                    ActionResponse response = new ActionResponse();
                    try
                    {
                        KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                        EntityFilter filter = callLog.Arguments[0];
                        int recordCount = logic.GetCount(filter);
                        response.Append(new Message($"{recordCount} records returned."));
                        response.DataObject = recordCount;
                    }
                    catch (Exception exception)
                    {
                        response.Append(FormatException(exception));
                    }

                    return ValidateResponseObject(response);
                }
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }
        #endregion CRUD Methods

        #region Foreign key CRUD access Methods

        /// <summary>
        /// Returns the related Puzzle entity related to the Solution.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Puzzle(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                KnightsTour.Solution solution = logic.GetById(callLog.Arguments[0]);
                if (solution == null || (!solution.PuzzleId.HasValue))
                {
                    return new NotFoundResult();
                }
                else
                {
                    return Ok(solution.Puzzle);
                }
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }

        /// <summary>
        /// Returns the related Member entity related to the Solution.
        /// </summary>
        /// <param name="arguments">A dynamic list of arguments (required by the wrapping method call 'ExecuteCommon()').</param>
        /// <returns>A <seealso cref="System.Web.Http.IActionResult" /> result.</returns>
        private IActionResult _Member(dynamic[] arguments)
        {
            WebApiCallLog callLog = (WebApiCallLog)arguments[0];

            if (callLog.IsAuthorized())
            {
                KnightsTour.SolutionLogic logic = new KnightsTour.SolutionLogic(callLog.UserName);
                KnightsTour.Solution solution = logic.GetById(callLog.Arguments[0]);
                if (solution == null || (!solution.MemberId.HasValue))
                {
                    return new NotFoundResult();
                }
                else
                {
                    return Ok(solution.Member);
                }
            }
            else
            {
                return ProcessExceptions(callLog);
            }
        }
        #endregion Foreign key CRUD access Methods

    } // Class
} // Namespace